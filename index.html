<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="stylesheet" href="style.css">
  <title>City Voice</title>

  <script src='https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.css' rel='stylesheet' />
</head>

<body>

  <div id='title-wrapper'>
    <h1>City Voice</h1>
  </div>

  <div class='descr' id='descr1'>
    <p>
      City Voice displays the prevalence of citizen engagement throughout the
      city of Cambridge, MA. It uses data on <b>public comments</b>, which are
      short, publicly available official statements submitted by local residents
      expressing their views on various community issues.

      <br><br>

      By mapping these comments by commenter address of residence, we can see
      where some of the most active and engaged community members tend to
      reside and how this has changed over time.

      <br><br>

      In this initial version, only written comments from 2017-2021 from
      residents who provided Cambridge addresses are included. Later versions
      can incorporate spoken comments as well, in addition to those from years
      earlier than 2017.
    </p>
  </div>

  <div id='heatmap-gif-section'>
    <div id='heatmap-gif-div'><img id='heatmap-gif' src="heatmap.gif" alt="heatmap.gif"></div>
  </div>

  <div class='descr' id='descr2'>
    <p>

      We can see that, throughout the past five years, much of the public
      discourse has been dominated by the south and north-west regions of the
      city, where the bulk of long-term residents live, with large "holes" near
      MIT and Harvard, where many of the more transient student populations as
      well as lower income residents live.

      <br><br>

      As the years go on, however, and the East Cambridge/Kendall Square areas
      became more developed, a much larger presence from the newly populated
      tech hubs came into the picture - especially as the community grappled
      with construction noise, under or overdevelopment, and/or resulting
      resident displacement.

      <br><br>

      Below is a breakdown of public comment content over these same five years.
      In addition to comment density, we can zoom in to see what residents are
      saying in each area.
    </p>
  </div>

  <div id='map_all_years' class='map-large'></div>

  <div id="maps-by-year">

    <!-- 2017 -->
    <div class='year-label-div'>
      <p>2017</p>
    </div>
    <div class="map-cloud-div">
      <div id='map_2017' class='map-small-div'></div>
      <div class='word-cloud-div'><img id='word-cloud-2017' class='word-cloud' src="word-cloud-2017.svg" alt="word-cloud-2017.svg"></div>
    </div>

    <!-- 2018 -->
    <div class='year-label-div'>
      <p>2018</p>
    </div>
    <div class="map-cloud-div">
      <div id='map_2018' class='map-small-div'></div>
      <div class='word-cloud-div'><img id='word-cloud-2018' class='word-cloud' src="word-cloud-2018.svg" alt="word-cloud-2018.svg"></div>
    </div>

    <!-- 2019 -->
    <div class='year-label-div'>
      <p>2019</p>
    </div>
    <div class="map-cloud-div">
      <div id='map_2019' class='map-small-div'></div>
      <div class='word-cloud-div'><img id='word-cloud-2019' class='word-cloud' src="word-cloud-2019.svg" alt="word-cloud-2019.svg"></div>
    </div>

    <!-- 2020 -->
    <div class='year-label-div'>
      <p>2020</p>
    </div>
    <div class="map-cloud-div">
      <div id='map_2020' class='map-small-div'></div>
      <div class='word-cloud-div'><img id='word-cloud-2020' class='word-cloud' src="word-cloud-2020.svg" alt="word-cloud-2020.svg"></div>
    </div>

    <!-- 2021 -->
    <div class='year-label-div'>
      <p>2021</p>
    </div>
    <div class="map-cloud-div">
      <div id='map_2021' class='map-small-div'></div>
      <div class='word-cloud-div'><img id='word-cloud-2021' class='word-cloud' src="word-cloud-2021.svg" alt="word-cloud-2021.svg"></div>
    </div>
  </div>

  <div class='descr' id='descr3'>
    <p>
      This display helps visualize both entrenched trends in public discourse as
      well as how neighborhood development can spur evolutionary change in these
      trends.
    </p>
  </div>

  <div id='attribution'>
    <p>
      Designed and developed by Dana Bullister, Spring 2021, IDDV Program,
      Northeastern University
    </p>
  </div>

  <!-- script to display Mapbox maps -->
  <script>
    mapboxgl.accessToken = 'pk.eyJ1IjoiZGJ1bGxpc3QiLCJhIjoiY2tsbzl2Z3g1MHIwejJ3cG1nbjFwOTVmdiJ9.Btd4mvqyAz7dL6WWQg0kjg';

    var map_all_years = new mapboxgl.Map({
      container: 'map_all_years', // container id
      style: 'mapbox://styles/dbullist/cknryrhui15tw17n8351dsntn'
    });

    map_all_years.on('load', function() {
      map_all_years.on('mousemove', function(e) {
        var tweets = map_all_years.queryRenderedFeatures(e.point, {
          layers: ['hiro_2017']
        });
      });
    });

    var map_2017 = new mapboxgl.Map({
      container: 'map_2017',
      style: 'mapbox://styles/dbullist/cko0cyn700mwg17no9e7r01g6'
    });

    map_2017.on('load', function() {
      map_2017.on('mousemove', function(e) {
        var tweets = map_2017.queryRenderedFeatures(e.point, {
          layers: ['hiro_2017']
        });
      });
    });

    var map_2018 = new mapboxgl.Map({
      container: 'map_2018',
      style: 'mapbox://styles/dbullist/cko0dijk40q4o17n1pz193q7o'
    });

    map_2018.on('load', function() {
      map_2018.on('mousemove', function(e) {
        var tweets = map_2018.queryRenderedFeatures(e.point, {
          layers: ['hiro_2017']
        });
      });
    });

    var map_2019 = new mapboxgl.Map({
      container: 'map_2019',
      style: 'mapbox://styles/dbullist/cko0ewmdw5hnj17peedvgcamv'
    });

    map_2019.on('load', function() {
      map_2019.on('mousemove', function(e) {
        var tweets = map_2019.queryRenderedFeatures(e.point, {
          layers: ['hiro_2017']
        });
      });
    });

    var map_2020 = new mapboxgl.Map({
      container: 'map_2020',
      style: 'mapbox://styles/dbullist/cko0eyxah47mm17qedprva6tm'
    });

    map_2020.on('load', function() {
      map_2020.on('mousemove', function(e) {
        var tweets = map_2020.queryRenderedFeatures(e.point, {
          layers: ['hiro_2017']
        });
      });
    });

    var map_2021 = new mapboxgl.Map({
      container: 'map_2021',
      style: 'mapbox://styles/dbullist/cko0f3dll40v917s0i578qqjr'
    });

    map_2021.on('load', function() {
      map_2021.on('mousemove', function(e) {
        var tweets = map_2021.queryRenderedFeatures(e.point, {
          layers: ['hiro_2017']
        });
      });
    });
  </script>

</body>

</html>